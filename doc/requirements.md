# Спецификация требований системы "Eboost-Library" (v2.1)

## 1. Основание проекта (Project Foundation)

### 1.1. Описание проблемы
Владельцы больших личных коллекций электронных книг сталкиваются с проблемой "мертвого груза": книги хранятся локально, но доступ к ним извне (с телефона, в дороге, для друзей) ограничен. Существующие решения либо слишком тяжеловесны, либо привязаны к одному интерфейсу. 

### 1.2. Концепция (Scope)
Необходима система-посредник, которая абстрагирует хранилище и поиск через единый внутренний протокол, предоставляя доступ через разные каналы коммуникации (Telegram, IRC, CLI) с сохранением контекста пользователя.

---

## 2. Бизнес-требования (Business Requirements)

| ID | Наименование | Описание |
| :--- | :--- | :--- |
| **BR-1** | Мультиканальность | Единая точка входа через разные интерфейсы (TG, IRC, CLI). |
| **BR-2** | Скорость поиска | Time-to-Content не более 3 секунд. |
| **BR-3** | Изоляция логики | Добавление новых фронтов без изменения Core-компонентов. |
| **BR-4** | Управляемый доступ | Ограничение доступа только для доверенного круга лиц. |
| **BR-5** | Поддержка форматов | Обработка и выдача разных расширений (EPUB, PDF, FB2). |
| **BR-6** | Континуитет сессий | Сохранение состояния поиска и навигации (пагинации). |
| **BR-7** | Масштабируемость | Стабильная работа при объеме базы до 1 000 000 книг. |
| **BR-8** | Автономность | Работа с локальными файлами без внешних зависимостей. |

---

## 3. Требования заинтересованных сторон (Stakeholder Requirements)

### 3.1. Группа: Поиск и навигация
* **UR-1: Поиск по атрибутам.** Пользователь должен иметь возможность найти книгу по автору, названию или серии.
    * *Трассировка:* [BR-1, BR-7, BR-2]
* **UR-2: Просмотр результатов.** Пользователь должен иметь возможность листать страницы выдачи (пагинация) без повторного ввода запроса.
    * *Трассировка:* [BR-6]
* **UR-3: Уточнение формата.** При выборе книги система должна предлагать список доступных для неё форматов.
    * *Трассировка:* [BR-5]

### 3.2. Группа: Получение контента
* **UR-4: Прямая доставка (TG).** В Telegram файл должен приходить документом (до определенного лимита размера).
    * *Трассировка:* [BR-1, BR-8]
* **UR-5: Ссылочная доставка (IRC/CLI).** В текстовых интерфейсах пользователь должен получать временную ссылку на скачивание.
    * *Трассировка:* [BR-1, BR-8]

### 3.3. Группа: Доступ и интерфейс
* **UR-6: Прозрачная авторизация.** Доступ предоставляется автоматически на основе ID платформы (UID Telegram, Host IRC).
    * *Трассировка:* [BR-4]
* **UR-7: Унификация команд.** Командный синтаксис должен быть единообразным для всех адаптеров.
    * *Трассировка:* [BR-1, BR-3]

### 3.4. Группа: Администрирование
* **UR-8: Управление белыми списками.** Владелец должен иметь возможность оперативно менять список разрешенных ID.
    * *Трассировка:* [BR-4]

---

## 4. Глоссарий
* **UnifiedMessage** — внутренний формат структуры данных, в который преобразуются все входящие запросы.
* **Whitelist** — список идентификаторов пользователей, имеющих доступ к системе.
* **OpenSearch** — основной движок полнотекстового поиска.
