syntax = "proto3";

package libraryv1;

option go_package = "ebusta/api/proto/v1;libraryv1";

service LibraryService {
  // Поиск книг по строке (вызывает fl_mixed_search)
  rpc SearchBooks (SearchRequest) returns (SearchResponse);
  
  // Получение списка авторов (вызывает fl_authors_all)
  rpc GetAuthors (ListRequest) returns (ListResponse);
}

message SearchRequest {
  string query = 1;
  int32 offset = 2;
  int32 limit = 3;
}

message Book {
  string id = 1;
  string title = 2;
  repeated string authors = 3;
  string container = 4;
  string filename = 5;
}

message SearchResponse {
  repeated Book books = 1;
  int32 total = 2;
}

message ListRequest {
  int32 limit = 1;
}

message ListResponse {
  repeated string items = 1;
}
